# Advanced Examples

Real-world implementations demonstrating how to use Currency.js in complex financial scenarios.

## Table of Contents

- [E-commerce Shopping Cart](#e-commerce-shopping-cart)
- [Payment Processing System](#payment-processing-system)
- [Subscription Billing](#subscription-billing)
- [International Pricing](#international-pricing)
- [Tax Calculator](#tax-calculator)

## E-commerce Shopping Cart

A full-featured shopping cart implementation with tax, shipping, and discounts:

```javascript
class ShoppingCart {
  constructor(options = {}) {
    this.items = [];
    this.options = {
      taxRate: options.taxRate || 0,
      currency: options.currency || 'USD',
      locale: options.locale || 'en-US',
    };
  }

  addItem(product, quantity = 1) {
    const existingItem = this.items.find(item => item.productId === product.id);

    if (existingItem) {
      existingItem.quantity += quantity;
    } else {
      this.items.push({
        productId: product.id,
        name: product.name,
        price: product.price,
        quantity: quantity
      });
    }

    return this;
  }

  updateQuantity(productId, quantity) {
    const item = this.items.find(item => item.productId === productId);

    if (item) {
      item.quantity = Math.max(0, quantity);

      if (item.quantity === 0) {
        this.removeItem(productId);
      }
    }

    return this;
  }

  removeItem(productId) {
    this.items = this.items.filter(item => item.productId !== productId);
    return this;
  }

  clear() {
    this.items = [];
    return this;
  }

  calculateItemSubtotal(item) {
    return Money(item.price, this._formatOptions()).times(item.quantity);
```
